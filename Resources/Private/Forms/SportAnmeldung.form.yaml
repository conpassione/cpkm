identifier: sportAnmeldung-kvm
label: SportAnmeldung KVM
type: Form
prototypeName: standard
renderingOptions:
  submitButtonLabel: Absenden
finishers:
  - identifier: EmailToSender
    options:
      subject: Bestätigungsmail
      recipients:
        '{email}': '{lastname} {firstname}'
      senderAddress: info@csbp.ch
      senderName: 'CSBP'
      addHtmlPart: true
      attachUploads: false
      title: 'Deine Anmeldung'
  - identifier: EmailToReceiver
    options:
      subject: 'Anmeldung von {lastname} {firstname}'
      recipients:
        info@csbp.ch: 'CSBP'
      senderAddress: '{email}'
      senderName: '{lastname} {firstname}'
      addHtmlPart: true
      attachUploads: false
      title: 'Anfrage via Website von {firstname} {lastname}'
  - identifier: SaveToDatabase
    options:
      table: tx_conpassione_registrationform
      mode: insert
      databaseColumnMappings:
        tstamp:
          value: '{__currentTimestamp}'
        pid:
          value: '{eventpid}'
      elements:
        lastname:
          mapOnDatabaseColumn: 'lastname'
        firstname:
          mapOnDatabaseColumn: 'firstname'
        mobile:
          mapOnDatabaseColumn: 'mobile'
        email:
          mapOnDatabaseColumn: 'email'
        sm-message:
          mapOnDatabaseColumn: 'sm-message'
        event:
          mapOnDatabaseColumn: 'event'
        sm-class:
          mapOnDatabaseColumn: 'sm-class'
        sm-dog:
          mapOnDatabaseColumn: 'sm-dog'
        sm-breed:
          mapOnDatabaseColumn: 'sm-breed'
        sm-birthdate:
          mapOnDatabaseColumn: 'sm-birthdate'
        sm-skg:
          mapOnDatabaseColumn: 'sm-skg'
  - identifier: Confirmation
    options:
      message: 'Besten Dank für Deine Anfrage. Du bekommst innerhalb einer Woche Antwort von uns.'
      contentElementUid: ''
renderables:
  - type: Page
    identifier: smpage-1
    renderables:
      - identifier: event
        defaultValue: 'ERROR: Unable to get Eventname'
        type: Text
        label: 'Anmeldung für Event'
        properties:
          containerClassAttribute: form-event-title
          fluidAdditionalAttributes:
            readonly: readonly
      - identifier: eventpid
        type: Hidden
        properties:
          elementClassAttribute: form-event-pid
          fluidAdditionalAttributes:
            readonly: readonly
            hidden: hidden
      - type: GridRow
        identifier: gridrow-2
        label: Person
        renderables:
          - identifier: lastname
            defaultValue: ''
            type: Text
            label: Name
            properties:
              fluidAdditionalAttributes:
                required: required
            validators:
              - identifier: NotEmpty
          - identifier: firstname
            defaultValue: ''
            type: Text
            label: Vorname
            properties:
              fluidAdditionalAttributes:
                required: required
            validators:
              - identifier: NotEmpty
      - identifier: gridrow-4
        type: GridRow
        label: Kommunikation
        renderables:
          - identifier: mobile
            type: Text
            label: Mobiltelefon
            defaultValue: ''
            properties:
              elementDescription: ''
          - identifier: email
            defaultValue: ''
            type: Text
            label: E-Mail
            properties:
              fluidAdditionalAttributes:
                required: required
              validationErrorMessages:
                - code: 1221559976
                  message: 'Die E-Mail ist für die Kommunikation nötig, bitte gültige E-Mail erfassen.'
            validators:
              - identifier: EmailAddress
              - identifier: NotEmpty
      - identifier: sm-class
        type: SingleSelect
        label: Klasse
        properties:
          options:
            A: A
            B1: B1
            B2: B2
          elementDescription: ''
          prependOptionLabel: '---'
          fluidAdditionalAttributes:
            required: required
          validationErrorMessages:
            - code: 1221560910
              message: 'Bitte Klasse auswählen'
            - code: 1221560718
              message: 'Bitte Klasse auswählen'
            - code: 1347992400
              message: 'Bitte Klasse auswählen'
            - code: 1347992453
              message: 'Bitte Klasse auswählen'
        validators:
          - identifier: NotEmpty
      - type: GridRow
        identifier: gridrow-1
        label: 'Grid: Hund'
        renderables:
          - defaultValue: ''
            type: Text
            identifier: sm-dog
            label: Hund
            properties:
              fluidAdditionalAttributes:
                required: required
              validationErrorMessages:
                - code: 1221560910
                  message: 'Bitte Name des Hundes eintragen'
            validators:
              - identifier: NotEmpty
          - defaultValue: ''
            properties:
              fluidAdditionalAttributes:
                min: ''
                max: ''
                step: 1
                autocomplete: bday
            type: Date
            identifier: sm-birthdate
            label: 'Geburtsdatum Hund'
      - identifier: sm-breed
        type: Text
        label: Rasse
        defaultValue: ''
      - identifier: sm-skg
        type: Checkbox
        label: 'Ich bin SKG Mitglied'
      - identifier: sm-message
        defaultValue: ''
        type: Textarea
        label: Mitteilung
      - type: Checkbox
        identifier: confirmation
        label: 'Ich bin einverstanden, dass die erfassten Daten für die Zwecke der Veranstaltung verwendet werden.'
        properties:
          elementDescription: ''
          fluidAdditionalAttributes:
            required: required
          validationErrorMessages:
            - code: 1221560910
              message: 'Bitte Verwendung der Daten zustimmen.'
        validators:
          - identifier: NotEmpty
      - identifier: sm-recinfo
        type: StaticText
        label: ''
        properties:
          text: '* Pflichtfelder'
